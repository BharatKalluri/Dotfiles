# Organizes tagged mp3 files into album wise directories
organizeMusic() {
    for file in *.mp3; do
        IFS=$':'
        album="$(id3v2 -l "${file}" | grep "TALB" | cut -d ':' -f 2 | xargs)"
        [[ ! -d "${album}" ]] && mkdir -p "${album}"
        mv -f "${file}" "${album}"
    done
}

albumdl() {
    albumUrl=$1
    uuid=$(uuidgen)
    mkdir /tmp/${uuid}
    cd /tmp/${uuid}
    spotdl -b "${albumUrl}"
    spotdl -l *.txt
    cd
}

mc() {
    # Create a new directory and enter it
    mkdir -p "$@" && cd "$@"
}

mute_ad_spotify() {
    MEDIA_TITLE=$(dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.freedesktop.DBus.Properties.Get string:org.mpris.MediaPlayer2.Player string:Metadata 2>/dev/null | sed -n '/title/{n;p}' | cut -d '"' -f 2)

    if [[ $MEDIA_TITLE = "Advertisement" ]]; then
        amixer -q -D pulse sset Master mute
    else
        amixer -q -D pulse sset Master unmute
    fi
}
